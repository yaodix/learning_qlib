
非常好的问题！“前复权”、“后复权”和“除权”是股票投资和量化交易中非常基础但容易混淆的概念。下面我们用**清晰、准确、易懂**的方式解释三者的区别与联系。

---

## 一、什么是“除权”（Ex-Rights / Ex-Dividend）？

### ✅ 定义：

**除权**是指上市公司因为**分红、送股、配股**等行为，导致股票的“**名义价格**”发生不连续跳变，需要在交易日开盘前对股价进行调整，以反映**权益变动后的实际价值**。

### 📌 举例（送股）：

- 腾讯宣布：**10 送 5 股**（即每持有 10 股，免费送 5 股）。
- 登记日前一天收盘价：**60 港元**。
- 除权日当天，股票数量变为 1.5 倍，**总市值不变**，所以理论价格变为：
  $$
  \frac{60}{1 + 5/10} = \frac{60}{1.5} = 40 \text{ 港元}
  $$
- 于是股价从 60 元“跳空”到 40 元——这就是**除权**。

> ⚠️ 除权本身**不创造或消灭价值**，只是“单价变低、股数变多”。

### 其他除权场景：

- **现金分红**：股价下调（如每股分 2 元，股价减 2 元）
- **配股**：按比例低价增发新股，股价重新计算
- **拆股/并股**：如 1 股拆 10 股，价格变为 1/10

---

## 二、为什么需要“复权”？

因为除权会导致**K线图出现巨大缺口**，使得：

- 技术指标失真（如均线、MACD）
- 历史价格无法与当前价格比较
- 回测策略失效（看起来跌了，其实是送股）

👉 于是引入“**复权**”来**修复价格序列的连续性**。

---

## 三、前复权 vs 后复权

| 项目               | 前复权（Forward Adjustment）             | 后复权（Backward Adjustment）                  |
| ------------------ | ---------------------------------------- | ---------------------------------------------- |
| **核心思想** | **保持当前价格不变**，调整历史价格 | **保持历史价格不变**，调整当前及未来价格 |
| **用途**     | 日常看盘、技术分析、量化建模（如 Qlib）  | 长期投资、计算真实收益率                       |
| **当前价格** | = 实际交易价格 ✅                        | ≠ 实际交易价格 ❌（被放大了）                 |
| **历史价格** | 被“压缩”或“拉伸”                     | = 原始成交价格 ✅                              |
| **复权因子** | 通常 >1（历史被调低）                    | 通常 >>1（当前被调高）                         |

---

### 📊 举例说明（假设腾讯 2008 年 60 元，2025 年 400 元，期间送股 2 次）

| 日期       | 实际价格（不复权） | 前复权价格 | 后复权价格 |
| ---------- | ------------------ | ---------- | ---------- |
| 2008-01-04 | 60 元              | ≈ 40 元   | 60 元      |
| 2025-01-07 | 400 元             | 400 元     | ≈ 600 元  |

- **前复权**：2025 年价格还是 400 元（真实价），但 2008 年价格被调低到 40 元，方便看长期涨幅。
- **后复权**：2008 年还是 60 元（历史真实价），但 2025 年变成 600 元，体现“如果一直持有，现在值多少”。

---

### 🔢 复权因子怎么用？

- **前复权因子（F）**：`前复权价格 = 实际价格 / F`
- **后复权因子（B）**：`后复权价格 = 实际价格 × B`
- 两者关系（近似）：
  `F ≈ 1 / B`（仅适用于单次除权，长期需累计）

---

## 四、不复权（原始价格）

- 就是交易所实际成交的价格。
- 除权日会出现跳空缺口。
- **不建议用于技术分析或量化模型！**

---

## 五、在量化中如何选择？

| 场景                           | 推荐复权方式                   |
| ------------------------------ | ------------------------------ |
| Qlib、聚宽、掘金等平台训练模型 | ✅**前复权**（平台默认） |
| 计算真实历史收益率             | ✅**后复权**             |
| 看盘、画K线、做技术分析        | ✅**前复权**（更直观）   |
| 验证“从上市持有至今赚多少”   | ✅**后复权**             |

> 💡 **Qlib、Tushare、AKShare 等默认提供前复权数据**，factor 也是前复权因子。

---

## 六、一句话总结

- **除权**：公司分红送股导致股价“人为下降”。
- **前复权**：**现在价格是真的**，历史价格被调整 → 适合交易和建模。
- **后复权**：**历史价格是真的**，现在价格被放大 → 适合看长期真实收益。

---

如果你在做量化策略（如用 Qlib），**统一使用前复权数据即可**，无需纠结后复权。但若要和同花顺/Wind 的后复权数据对比，请注意它们**不在同一基准上**。

需要我帮你写一段代码自动转换复权方式吗？😊




ETF数据有无复权问题
